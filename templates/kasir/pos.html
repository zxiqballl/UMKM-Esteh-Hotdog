<!doctype html>
<html lang="id">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>POS â€” Kasir</title>
	<link rel="stylesheet" href="/static/css/style.css">
	<script defer src="/static/js/ui.js"></script>
</head>
<body>
	<div class="container">
		<header class="site-header">
			<div class="brand"><div class="logo">EH</div><h1>POS</h1></div>
			<div><a href="/logout" class="muted">Logout</a></div>
		</header>

		<div class="pos-wrap">
			<section>
				<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
					<div class="search">
						<input id="product-search" type="text" placeholder="Cari produk..." oninput="searchProducts(this.value)">
					</div>
				</div>

				<div id="products" class="products">
					{% for p in products|default([]) %}
					<div class="product card">
						<div class="title">{{ p.name }}</div>
						<div class="price">Rp {{ p.price }}</div>
						<div style="margin-top:auto;width:100%">
                            <button class="btn btn-primary"
                                data-product='{{ p | tojson }}'
                            onclick="addToCart(JSON.parse(this.dataset.product))">
                                Tambah
                        </button>
                    </div>
					</div>
					{% else %}
					<div class="muted">Belum ada produk</div>
					{% endfor %}
				</div>
			</section>

			<aside class="card">
				<h3>Keranjang</h3>
				<div id="cart" class="cart">
					<div class="cart-items" id="cart-items">
						<div class="muted">Keranjang kosong</div>
					</div>

					<div style="display:flex;justify-content:space-between;align-items:center">
						<div class="muted">Total</div>
						<div id="cart-total" style="font-weight:700">Rp 0</div>
					</div>

					<div style="display:flex;gap:8px;margin-top:8px">
						<button class="btn btn-primary" onclick="checkout()">Bayar</button>
						<button class="btn btn-ghost" onclick="clearCart()">Bersihkan</button>
					</div>
				</div>
			</aside>
		</div>
	</div>
</body>
</html>

